<head>
  <title>ImpressJsApp</title>
  <%= stylesheet_link_tag  "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= stylesheet_link_tag "impress-theme1.css", :media => "all" %>
  <%= stylesheet_link_tag "/assets/css/normalize.css" %>
  <%= stylesheet_link_tag "/assets/css/toggle-switch.css" %>
  <%= stylesheet_link_tag "/assets/default.css" %>
  <%= javascript_include_tag "/assets/scripts/jquery.min.js" %>
  <%= javascript_include_tag "http://kenshin54.github.io/popline/build/jquery.popline.min.js" %>

    <script type="text/javascript">
    $(function(){
      document.execCommand('defaultParagraphSeparator', false, 'p');
      $(".editor").popline();
      $("body").data("mode", "edit");
      $("input[name='mode']").click(function(){
        if (this.id !== $("body").data("mode")) {
          $(".editor").popline("destroy");
          $(".editor").attr("contenteditable", this.id === "edit");
          $(".editor").popline({mode: this.id});
          $("body").data("mode", this.id);
        }
      });
    });

  </script> 



  <style>
  .slide { z-index: 1;}
  </style>
</head>


<body>
  <div class="container-fluid">
      <% @num_slides.times do |n| %>  
        <div class="step slide" >
          <div  class="editor editorr" contenteditable="true">
            <%=
            if @content.nil? || @content[n.to_s].nil?
              render "presentation/partials/#{@example_slides[n]}"
            else
                @content[n.to_s].html_safe
            end
          %>
          </div>
        </div>
      <% end %>
  </div>


  <script>
    var editor = document.querySelectorAll('.editor');
      for (var i = 0; i< editor.length; i++) {
        var content = editor[i].innerHTML;
        editor[i].addEventListener('blur', function(){
        storeData(); }, false);
      }
     

    var storeData = function () {
      var editor = document.querySelectorAll('.editor');
      for (var i = 0; i< editor.length; i++) {
        parent.$("#data-store").data("content["+i+"]", editor[i].innerHTML);
      } 
    } 
  </script>


</body>


 
